<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>{{ cv.title }}</title>

  <!-- Bootstrap local en caso de que no se cargue bien desde CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

  <style>
    body {
      font-family: {{ cv.font_family }}, sans-serif;
      color: {{ cv.primary_color }};
      margin: 30px;
    }

    h1, h4, h5 {
      color: {{ cv.primary_color }};
    }

    img {
      max-width: 100%;
      height: auto;
    }

    .section-box {
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .shadow-sm {
      box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }

    /* Mejora para evitar cortes raros al imprimir en PDF */
    .page-break {
      page-break-after: always;
    }
  </style>
</head>
<body>

  {% if cv.header_image %}
    <div class="text-center mb-4">
      <img src="{{ cv.header_image.url }}" class="img-fluid rounded shadow" alt="Imagen de cabecera">
    </div>
  {% endif %}

  {% if profile %}
    <div class="section-box" style="background-color: #f0f4ff;">
      <h4>üë§ Informaci√≥n del Perfil</h4>
      <p><strong>Nombre:</strong> {{ profile.user.first_name }} {{ profile.user.last_name }}</p>
      <p><strong>Email:</strong> {{ profile.user.email }}</p>
      <p><strong>Tel√©fono:</strong> {{ profile.phone|default:"No especificado" }}</p>
    </div>
  {% endif %}

  <div class="row">

    <div class="col-12 col-md-6">
      <div class="section-box shadow-sm" style="background-color: #e8f0ff;">
        <h5>üìå Experiencias</h5>
        {% for exp in cv.selected_experiences.all %}
          <p><strong>{{ exp.position }}</strong><br>
          {{ exp.company }}<br>
          <small>{{ exp.start_date }} - {{ exp.end_date|default:"Actualidad" }}</small></p>
        {% empty %}
          <p class="text-muted">No hay experiencias registradas.</p>
        {% endfor %}
      </div>
    </div>

    <div class="col-12 col-md-6">
      <div class="section-box shadow-sm" style="background-color: #fffde7;">
        <h5>üéì Formaci√≥n</h5>
        {% for edu in cv.selected_educations.all %}
          <p><strong>{{ edu.title }}</strong><br>{{ edu.institution }}</p>
        {% empty %}
          <p class="text-muted">No hay formaci√≥n registrada.</p>
        {% endfor %}
      </div>
    </div>

    <div class="col-12 col-md-6">
      <div class="section-box shadow-sm" style="background-color: #f1f8e9;">
        <h5>üåç Idiomas</h5>
        {% for lang in cv.selected_languages.all %}
          <p>{{ lang.language.name }} - {{ lang.level }}</p>
        {% empty %}
          <p class="text-muted">No hay idiomas registrados.</p>
        {% endfor %}
      </div>
    </div>

    <div class="col-12 col-md-6">
      <div class="section-box shadow-sm" style="background-color: #fce4ec;">
        <h5>üí° Habilidades Blandas</h5>
        {% for skill in cv.selected_softskills.all %}
          <p>{{ skill.skill.name }}</p>
        {% empty %}
          <p class="text-muted">No hay habilidades blandas registradas.</p>
        {% endfor %}
      </div>
    </div>

    <div class="col-12">
      <div class="section-box shadow-sm" style="background-color: #e3f2fd;">
        <h5>üéØ Hobbies</h5>
        {% for h in cv.selected_hobbies.all %}
          <p>{{ h.hobby.name }}</p>
        {% empty %}
          <p class="text-muted">No hay hobbies registrados.</p>
        {% endfor %}
      </div>
    </div>

  </div>

</body>
</html>

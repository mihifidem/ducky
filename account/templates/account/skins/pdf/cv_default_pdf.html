<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    body {
      font-size: 12px;
      margin: 30px;
    }
    h1, h2 {
      color: #222;
      border-bottom: 1px solid #ccc;
      padding-bottom: 4px;
      margin-top: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 15px;
    }
    td, th {
      padding: 5px;
      vertical-align: top;
    }
    ul {
      margin: 0;
      padding-left: 15px;
    }
    .section {
      margin-bottom: 20px;
    }
    .muted {
      color: #777;
    }
    .header-img {
      max-width: 100%;
      height: auto;
      margin-bottom: 20px;
    }
  </style>
</head>

<body style="color: {{ cv.primary_color }}; font-family: {{ cv.font_family }};">

  {% if cv.header_image %}
    <img src="{{ cv.header_image.url }}" class="img-fluid mb-4" alt="Header Image">
  {% endif %}

  {% if profile %}
    <div class="border rounded p-3 mb-4 bg-light">
      <h2 class="text-secondary">üë§ Informaci√≥n del Perfil</h2>
      <p><strong>Nombre:</strong> {{ profile.user.first_name }} {{ profile.user.last_name }}</p>
      <p><strong>Email:</strong> {{ profile.user.email }}</p>
      <p><strong>Tel√©fono:</strong> {{ profile.phone|default:"No especificado" }}</p>
    </div>
  {% endif %}


  <div class="section mb-4">
    <h2>üìå Experiencias</h2>
    {% if cv.selected_experiences.all %}
    <table class="table table-striped table-sm">
      {% for exp in cv.selected_experiences.all %}
      <tr>
        <td><strong>{{ exp.position }}</strong></td>
        <td>{{ exp.company }}</td>
        <td><small>{{ exp.start_date }} ‚Äì {{ exp.end_date|default:"Actualidad" }}</small></td>
      </tr>
      {% endfor %}
    </table>
    {% else %}
    <p class="text-muted">No hay experiencias registradas.</p>
    {% endif %}
  </div>

  <div class="section mb-4">
    <h2>üéì Formaci√≥n</h2>
    {% if cv.selected_educations.all %}
    <table class="table table-bordered table-sm">
      {% for edu in cv.selected_educations.all %}
      <tr>
        <td>{{ edu.title }}</td>
        <td>{{ edu.institution }}</td>
      </tr>
      {% endfor %}
    </table>
    {% else %}
    <p class="text-muted">No hay formaci√≥n registrada.</p>
    {% endif %}
  </div>

  <div class="section mb-4">
    <h2>üåç Idiomas</h2>
    {% if cv.selected_languages.all %}
    <table class="table table-hover table-sm">
      {% for lang in cv.selected_languages.all %}
      <tr>
        <td>{{ lang.language.name }}</td>
        <td>{{ lang.level }}</td>
      </tr>
      {% endfor %}
    </table>
    {% else %}
    <p class="text-muted">No hay idiomas registrados.</p>
    {% endif %}
  </div>

  <div class="section mb-4">
    <h2>üí° Habilidades Blandas</h2>
    {% if cv.selected_softskills.all %}
    <ul class="list-unstyled">
      {% for skill in cv.selected_softskills.all %}
      <li>‚Ä¢ {{ skill.skill.name }}</li>
      {% endfor %}
    </ul>
    {% else %}
    <p class="text-muted">No hay habilidades blandas registradas.</p>
    {% endif %}
  </div>

  <div class="section mb-4">
    <h2>üéØ Hobbies</h2>
    {% if cv.selected_hobbies.all %}
    <ul class="list-unstyled">
      {% for h in cv.selected_hobbies.all %}
      <li>‚Ä¢ {{ h.hobby.name }}</li>
      {% endfor %}
    </ul>
    {% else %}
    <p class="text-muted">No hay hobbies registrados.</p>
    {% endif %}
  </div>

</body>
</html>
